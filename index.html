<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mini Café Menu</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="site-header">
    <h1>Mini Café Menu</h1>
    <div class="promo-banner" role="note" aria-live="polite">
      <strong>Khuyến mãi:</strong> Đơn ≥ 200.000₫ giảm 5% • Đơn ≥ 300.000₫ <u>freeship</u>
    </div>
  </header>

  <main class="container">
    <!-- Định vị & phí ship -->
    <section class="shipping-card" aria-labelledby="ship-title">
      <div class="ship-row">
        <h2 id="ship-title">Định vị &amp; phí ship</h2>
        <button id="locateBtn" class="btn">Định vị (Geolocation)</button>
      </div>
      <p class="ship-note">
        Quy tắc: 1–3km: miễn phí • &gt;3–&lt;6km: 20.000₫ • 6–12km: 40.000₫ • &gt;12km: 40.000₫
      </p>
      <div class="ship-info">
        <span>Khoảng cách ước tính: <strong id="distanceText">—</strong></span>
        <span>Phí ship dự kiến: <strong id="shippingFeeText">—</strong></span>
      </div>
    </section>

    <!-- Sản phẩm -->
    <section>
      <h2>Thức uống nổi bật</h2>
      <div id="productGrid" class="grid"></div>
    </section>
  </main>

  <!-- Nút nổi giỏ hàng -->
  <button id="cartFab" class="cart-fab" aria-label="Mở giỏ hàng">
    🧺 <span id="cartCount" class="badge">0</span>
  </button>

  <!-- Modal giỏ hàng -->
  <div id="cartModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="cartTitle">
    <div class="modal-content">
      <button class="modal-close" data-close>&times;</button>
      <h3 id="cartTitle">Giỏ hàng</h3>
      <div id="cartItems" class="cart-items"></div>

      <div class="summary">
        <div class="summary-row"><span>Tạm tính</span><span id="subtotalText">0₫</span></div>
        <div class="summary-row"><span>Giảm giá</span><span id="discountText">0₫</span></div>
        <div class="summary-row"><span>Phí ship</span><span id="shippingText">—</span></div>
        <div class="summary-row total"><span>Tổng cộng</span><span id="totalText">0₫</span></div>
      </div>

      <div class="actions">
        <button id="clearCartBtn" class="btn btn-ghost">Xóa giỏ</button>
        <button id="checkoutBtn" class="btn btn-primary">Thanh toán</button>
      </div>
    </div>
  </div>

  <!-- Modal Thanh toán -->
  <div id="paymentModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="payTitle">
    <div class="modal-content">
      <button class="modal-close" data-close>&times;</button>
      <h3 id="payTitle">Chọn phương thức thanh toán</h3>

      <form id="paymentForm" class="payment-form">
        <label class="radio">
          <input type="radio" name="payment" value="cash" checked />
          Tiền mặt khi nhận hàng
        </label>
        <label class="radio">
          <input type="radio" name="payment" value="bank" />
          Chuyển khoản
        </label>
        <label class="radio">
          <input type="radio" name="payment" value="qr" />
          QR
        </label>

        <div id="qrBlock" class="qr-block" hidden>
          <img src="images/qr.png" alt="Mã QR thanh toán" />
          <p class="qr-note">Quét mã để thanh toán. Vui lòng ghi nội dung: <em>MiniCafe - SĐT</em>.</p>
        </div>

        <div class="actions">
          <button type="button" class="btn btn-ghost" data-close>Đóng</button>
          <button type="submit" class="btn btn-primary">Xác nhận đặt hàng</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Nhạc nền: tự phát (muted) để qua chính sách autoplay -->
  <div class="audio-bar">
    <button id="audioToggle" class="btn btn-ghost" aria-pressed="false" aria-label="Bật/Tắt tiếng">🔈 Bật tiếng</button>
    <audio id="bgm" preload="auto" autoplay muted loop>
      <source src="audio/bgm.mp3" type="audio/mpeg" />
    </audio>
    <span id="audioStatus" class="audio-status">Đang phát (đang tắt tiếng)</span>
  </div>

  <footer class="site-footer">
    <small>© 2025 Mini Café</small>
  </footer>

  <script src="script.js"></script>
</body>
</html>
