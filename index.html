<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mini Café Menu ☕</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header><h1>🧋 Mini Café Menu</h1></header>

  <section id="menu"></section>

  <!-- BẢNG TUỲ CHỌN / PHỤ THÊM -->
  <section class="extras-wrap">
    <h2 class="extras-title">Tuỳ chọn thêm</h2>
    <table class="extras-table">
      <thead>
        <tr><th>Hạng mục</th><th>Mô tả</th><th>Phụ phí</th></tr>
      </thead>
      <tbody>
        <tr><td>Upsize</td><td>Tăng dung tích mỗi ly</td><td>+10k / ly</td></tr>
        <tr><td>Lượng đường</td><td>0% • 30% • 50% • 70% • 100%</td><td>0k</td></tr>
        <tr><td>Thêm matcha</td><td>+ 1 shot bột matcha</td><td>+5k</td></tr>
        <tr><td>Thêm dâu</td><td>+ 1 phần mứt/miếng dâu</td><td>+15k</td></tr>
      </tbody>
    </table>
  </section>

  <!-- MODAL SẢN PHẨM -->
  <div id="product-modal" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal__overlay" data-close="true"></div>
    <div class="modal__dialog" role="document">
      <button class="modal__close" aria-label="Đóng" data-close="true">×</button>

      <h2 class="modal__title">Sản phẩm</h2>
      <div id="product-list" class="product-grid"></div>

      <!-- PANEL TÍNH TIỀN -->
      <div class="calc-panel">
        <h3 class="calc-title">Tính giá</h3>
        <div class="calc-picked">
          <span class="calc-picked__label">Đã chọn:</span>
          <span id="picked-name" class="calc-picked__name">—</span>
          <span id="picked-base" class="calc-picked__base">0k</span>
        </div>

        <div class="calc-options">
          <label class="opt"><input type="checkbox" id="opt-upsize" /> Upsize (+10k)</label>
          <div class="opt opt-sugar">
            <span>Đường:</span>
            <label><input type="radio" name="sugar" value="0" checked /> 0%</label>
            <label><input type="radio" name="sugar" value="30" /> 30%</label>
            <label><input type="radio" name="sugar" value="50" /> 50%</label>
            <label><input type="radio" name="sugar" value="70" /> 70%</label>
            <label><input type="radio" name="sugar" value="100" /> 100%</label>
          </div>
          <label class="opt"><input type="checkbox" id="opt-add-matcha" /> Thêm matcha (+5k)</label>
          <label class="opt"><input type="checkbox" id="opt-add-strawberry" /> Thêm dâu (+15k)</label>
        </div>

        <div class="calc-total">
          <span>Tạm tính:</span>
          <strong id="total-amount">0k</strong>
        </div>

        <button id="add-to-cart" class="add-btn">🛒 Thêm vào giỏ</button>
      </div>
    </div>
  </div>

  <!-- 🛒 NÚT GIỎ HÀNG NỔI -->
  <button id="cart-fab" class="cart-fab" aria-label="Mở giỏ hàng">
    🛒 <span id="cart-count" class="cart-badge">0</span>
  </button>

  <!-- 🛒 MODAL GIỎ HÀNG CHI TIẾT -->
  <div id="cart-modal" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal__overlay" data-close="true"></div>
    <div class="modal__dialog" role="document">
      <button class="modal__close" aria-label="Đóng" data-close="true">×</button>

      <h2 class="modal__title">Giỏ hàng</h2>
      <div id="cart-detail" class="cart-detail">
        <ul id="cart-items"></ul>

        <div id="promo-banner" class="promo-banner hidden">🎉 Đơn ≥ 200k: Giảm 5% tổng hóa đơn</div>

        <div class="cart-summary">
          <div><span>Subtotal:</span><strong id="sum-subtotal">0k</strong></div>
          <div><span>Giảm giá:</span><strong id="sum-discount">0k</strong></div>
          <div><span>Phí ship:</span><strong id="sum-shipping">0k</strong></div>
          <div class="grand"><span>Tổng thanh toán:</span><strong id="sum-grand">0k</strong></div>
        </div>

        <div class="shop-loc">
          <p><strong>🏪 Địa chỉ shop:</strong> 18 Nguyễn An Ninh, Phường 7, TP. Vũng Tàu</p>
          <p id="distance-line">📍 Khoảng cách của bạn: <em>chưa xác định</em></p>
          <div class="loc-actions">
            <button id="btn-get-location" class="loc-btn">Lấy vị trí của tôi</button>
            <button id="btn-checkout" class="pay-btn">Tiến tới thanh toán</button>
          </div>
          <p class="loc-note">Vui lòng bật quyền vị trí trên trình duyệt để tính phí ship chính xác.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- 💳 MODAL HÌNH THỨC THANH TOÁN -->
  <div id="pay-modal" class="modal hidden" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal__overlay" data-close="true"></div>
    <div class="modal__dialog" role="document">
      <button class="modal__close" aria-label="Đóng" data-close="true">×</button>
      <h2 class="modal__title">Chọn hình thức thanh toán</h2>

      <form id="pay-form" class="pay-form">
        <label class="pay-opt"><input type="radio" name="pay" value="cash" checked> Thanh toán bằng tiền mặt</label>
        <label class="pay-opt"><input type="radio" name="pay" value="bank"> Thanh toán chuyển khoản</label>
        <label class="pay-opt"><input type="radio" name="pay" value="qr"> Thanh toán qua mã QR</label>

        <div id="qr-box" class="qr-box hidden">
          <p>Quét mã để thanh toán:</p>
          <img src="images/qr.png" alt="QR thanh toán" />
        </div>

        <div class="pay-actions">
          <button type="button" id="pay-confirm" class="pay-btn">Xác nhận thanh toán</button>
        </div>

        <p id="pay-result" class="pay-result"></p>
      </form>
    </div>
  </div>

  <!-- 🎵 NHẠC NỀN -->
  <audio id="bgm" src="audio/bgm.mp3" loop></audio>
  <button id="bgm-toggle" class="bgm-btn" aria-label="Nhạc nền">♪</button>

  <footer><p>Made with 💖 by A Nhí & Friends</p></footer>

  <script src="script.js"></script>
</body>
</html>
